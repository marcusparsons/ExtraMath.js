/*
    Created by: Marcus Parsons, Copyright 2015, http://www.marcusparsons.com
    
    ExtraMath is free for everyone to use, regardless of whether it is for personal or commercial use. 
    I only ask that you give me credit because a lot of work has gone into this library. It is licensed under
    the GNU GPL v3 license. You may obtain a copy of this license at http://www.gnu.org/licenses/gpl.txt
    
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
        
    Big credit to the MDN for some of their polyfill functions! https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math
    
*/

function round(r,e,t){var a,o,n,s;if(e|=0,a=Math.pow(10,e),r*=a,s=r>0|-(0>r),n=r%1===.5*s,o=Math.floor(r),n)switch(t){case"round_up":r=o+(s>0);break;case"round_down":r=o+(0>s);break;case"round_even":r=o+o%2*s;break;case"round_odd":r=o+!(o%2);break;default:r=o+(s>0)}return(n?r:Math.round(r))/a}function evaluate(r){return new Function("return "+r)()}function showError(r){throw new Error(r)}var defPrec=16,errorMsg="Error: Unable to process expression due to ";Math.acosh=Math.acosh||function(r){try{return r=parseFloat(r),1>r?(showError("Error: acosh only accepts numbers greater than or equal to 1"),0):round(Math.log(r+Math.sqrt(r*r-1)),defPrec)}catch(e){showError(errorMsg+e)}},Math.area=function(r){try{var e=[];if("string"==typeof arguments[1]||"number"==typeof arguments[1])for(var t in arguments)0!==t&&(e[t-1]=parseFloat(arguments[t]));else for(var t=0;t<arguments[1].length+1;t++)e[t]=parseFloat(arguments[1].shift());switch(r){case"circle":case"cir":var a=e[0];return"exact"===e[1]?round(Math.pow(a,2),defPrec)+"&pi;":round(Math.PI*Math.pow(a,2),defPrec);case"cone":case"con":var a=e[0],o=e[1];return round(Math.PI*a*(a+Math.sqrt(Math.pow(o,2)+Math.pow(a,2))),defPrec);case"cube":case"cub":var n=e[0];return round(6*Math.pow(n,2),defPrec);case"cylinder":case"cyl":var a=e[0],o=e[1];return round(2*Math.PI*a*(o+a),defPrec);case"ellipse":case"ell":var s=e[0],u=e[1];return"exact"===e[2]?round(s*u,defPrec)+"&pi;":round(Math.PI*s*u,defPrec);case"npolygon":case"npo":var c=e[0],n=e[1];return round(.25*c*Math.pow(n,2)*(1/Math.tan(Math.PI/c)),defPrec);case"parallelogram":case"par":var s=e[0],u=e[1];return round(s*u,defPrec);case"rectangle":case"rec":var s=e[0],u=e[1];return round(s*u,defPrec);case"sector":case"sec":var a=e[0],h=e[1];return round(.5*Math.pow(a,2)*h,defPrec);case"segment":case"seg":var a=e[0],h=e[1];return round(.5*(h-Math.sin(h))*Math.pow(a,2),defPrec);case"square":case"squ":var s=e[0];return round(Math.pow(s,2),defPrec);case"sphere":case"sph":var a=e[0];return round(4*Math.PI*Math.pow(a,2),defPrec);case"torus":case"tor":var f=e[0],l=e[1];return round(4*Math.pow(Math.PI,2)*f*l,defPrec);case"trapezoid":case"tra":var s=e[0],u=e[1],o=e[2];return round(.5*(s+u)*o,defPrec);case"triangle":case"tri":var u=e[0],o=e[1];return round(.5*u*o,defPrec);default:showError("You must choose a shape in order to calculate its area. You may enter the full name of the shape or the first three letters.")}}catch(M){showError(errorMsg+M)}},Math.asinh=Math.asinh||function(r){try{return r=parseFloat(r),r===-1/0?r:round(Math.log(r+Math.sqrt(r*r+1)),defPrec)}catch(e){showError(errorMsg+e)}},Math.atanh=Math.atanh||function(r){try{return r=parseFloat(r),-1>r||r>1?(showError("Error: atanh only accepts numbers between 1 and -1, exclusive."),0):round(Math.log((1+r)/(1-r))/2,defPrec)}catch(e){showError(errorMsg+e)}},Math.cbrt=Math.cbrt||function(r){try{r=parseFloat(r);var e=Math.pow(Math.abs(r),1/3);return e=0>r?-e:e,round(e,defPrec)}catch(t){showError(errorMsg+t)}},Math.clz32=Math.clz32||function(r){try{var e=Number(r)>>>0;return e?32-e.toString(2).length:32}catch(t){showError(errorMsg+t)}},Math.cosh=Math.cosh||function(r){try{r=parseFloat(r);var e=Math.exp(r);return round((e+1/e)/2,defPrec)}catch(t){showError(errorMsg+t)}},Math.cot=function(r){return r=parseFloat(r),round(1/Math.tan(r),defPrec)},Math.csc=function(r){return r=parseFloat(r),round(1/Math.sin(r),defPrec)},Math.expm1=Math.expm1||function(r){try{return r=parseFloat(r),round(Math.exp(r)-1,defPrec)}catch(e){showError(errorMsg+e)}},Math.fround=Math.fround||function(r){try{return Float32Array?new Float32Array([r])[0]:(showError("fround cannot execute because Float32Array not supported."),!1)}catch(e){showError(errorMsg+e)}},Math.fact=function(r){try{if(r=parseInt(r,10),r>0){for(var e=[],t=0;r>t;t++)e.push(t+1+"*");e[e.length-1]=e.length,e=e.toString();do e=e.replace(",","");while(e.indexOf(",")>-1);return console.log(e),round(evaluate(e),64)}return 0===r?"1":(showError("Factorials can only be done on positive numbers!"),0)}catch(a){showError(errorMsg+a)}},Math.hypot=Math.hypot||function(){try{var r=0;for(var e in arguments){if(1/0===arguments[e]||arguments[e]===-1/0)return 1/0;arguments[e]=parseFloat(arguments[e]),r+=arguments[e]*arguments[e]}return round(Math.sqrt(r),defPrec)}catch(t){showError(errorMsg+t)}},Math.imul=Math.imul||function(r,e){try{var t=r>>>16&65535,a=65535&r,o=e>>>16&65535,n=65535&e;return a*n+(t*n+a*o<<16>>>0)|0}catch(s){showError(errorMsg+s)}},Math.intdiv=function(){try{if("string"==typeof arguments[0]||"number"==typeof arguments[0]){var r="";for(var e in arguments)r+=parseFloat(arguments[e]).toString()+"/";return r=r.substr(0,r.length-1),Math.floor(evaluate(r))}arguments[0]=arguments[0].toString();do arguments[0]=arguments[0].replace(",","/");while(arguments[0].indexOf(",")>-1);return Math.floor(evaluate(arguments[0]))}catch(t){showError(errorMsg+t)}},Math.line=function(){try{var r={};if("string"==typeof arguments[0]||"number"==typeof arguments[0]){arguments[0]=parseFloat(arguments[0]),arguments[1]=parseFloat(arguments[1]),arguments[2]=parseFloat(arguments[2]),arguments[3]=parseFloat(arguments[3]),r.slope=(arguments[3]-arguments[1])/(arguments[2]-arguments[0]),r.yint=arguments[1]-round(r.slope*arguments[0],defPrec);var e=r.yint>0?" + "+r.yint:" - "+-r.yint;return r.equation="y = "+r.slope+"x"+e,r}if(arguments[0].length>4)return showError("You may only use two sets of points with the line function!"),0;var t=[],a=0,r={};do t[a]=parseFloat(arguments[0].shift()),a++;while(arguments[0].length>0);r.slope=(t[3]-t[1])/(t[2]-t[0]),r.yint=t[1]-round(r.slope*t[0],defPrec);var e=r.yint>0?" + "+r.yint:" - "+-r.yint;return r.equation="y = "+r.slope+"x"+e,r}catch(o){showError(errorMsg+o)}},Math.log10=Math.log10||function(r){try{return r=parseFloat(r),round(Math.log(r)/Math.log(10),defPrec)}catch(e){showError(errorMsg+e)}},Math.log1p=Math.log1p||function(r){try{return r=parseFloat(r),round(Math.log(1+r),defPrec)}catch(e){showError(errorMsg+e)}},Math.log2=Math.log2||function(r){try{return r=parseFloat(r),round(Math.log(r)/Math.log(2),defPrec)}catch(e){showError(errorMsg+e)}},Math.logb=function(r,e){try{return e=parseFloat(e),r=parseFloat(r),round(Math.log(r)/Math.log(e),defPrec)}catch(t){showError(errorMsg+t)}},Math.mean=function(){var r=0;try{if("string"==typeof arguments[0]||"number"==typeof arguments[0]){for(var e in arguments)r+=parseInt(arguments[e],10);return round(r/arguments.length,defPrec)}var t=arguments[0].length,r=0;for(var e in arguments[0])r+=parseFloat(arguments[0][e]);return round(r/t,defPrec)}catch(a){showError(errorMsg+a)}},Math.nck=function(r,e){try{if(r=parseInt(r,10),e=parseInt(e,10),r>0&&e>0)return round(Math.fact(r)/(Math.fact(r-e)*Math.fact(e)),defPrec);showError("When using nck, n and k must both be greater than zero!")}catch(t){showError(errorMsg+t)}},Math.nroot=function(r,e){try{if(r=parseFloat(r),e=parseInt(e,10),e%2===0&&0>r)return showError("Even roots require a positive number!"),0;var t=Math.pow(Math.abs(r),1/e);return t=0>r?-t:t,round(t,defPrec)}catch(a){showError(errorMsg+a)}},Math.perimeter=function(r){try{var e=[];if("string"==typeof arguments[1]||"number"==typeof arguments[1])for(var t in arguments)0!==t&&(e[t-1]=parseFloat(arguments[t]));else for(var t=0;t<arguments[1].length+1;t++)e[t]=parseFloat(arguments[1].shift());switch(r){case"circle":case"cir":var a=e[0];return round(2*Math.PI*a,defPrec);case"ellipse":case"ell":var o=e[0],n=e[1],s=Math.pow(o-n,2)/Math.pow(o+n,2);return round(Math.PI*(o+n)*(1+3*s/(10+Math.sqrt(4-3*s))),defPrec);case"quadrilateral":case"qua":var o=e[0],n=e[1],u=e[2],c=e[3];return round(o+n+u+c,defPrec);case"rectangle":case"rec":var h=e[0],s=e[1];return round(2*(h+s),defPrec);case"sector":case"sec":var a=e[0],f=e[1];return round(a*(f+2),defPrec);case"square":case"squ":var o=e[0];return round(4*o,defPrec);case"triangle":case"tri":var o=e[0],n=e[1],u=e[2];return round(o+n+u,defPrec);default:showError("You must choose a shape in order to calculate its perimeter. You may enter the full name of the shape or the first three letters.")}}catch(l){showError(errorMsg+l)}},Math.randomr=function(r,e){try{return r=parseInt(r,10),e=parseInt(e,10),Math.floor(Math.random()*(e-r+1))+r}catch(t){showError(errorMsg+t)}},Math.sign=Math.sign||function(r){try{return r>0?1:0>r?-1:0}catch(e){showError(errorMsg+e)}},Math.sinh=Math.sinh||function(r){try{return r=parseFloat(r),round((Math.exp(r)-Math.exp(-r))/2,defPrec)}catch(e){showError(errorMsg+e)}},Math.sec=function(r){return r=parseFloat(r),round(1/Math.cos(r),defPrec)},Math.tanh=Math.tanh||function(r){try{return 1/0===r?1:r===-1/0?-1:(r=parseFloat(r),round((Math.exp(r)-Math.exp(-r))/(Math.exp(r)+Math.exp(-r)),defPrec))}catch(e){showError(errorMsg+e)}},Math.trunc=Math.trunc||function(r){try{return r=parseFloat(r),0>r?Math.ceil(r):Math.floor(r)}catch(e){showError(errorMsg+e)}},Math.volume=function(r){try{var e=[];if("string"==typeof arguments[1]||"number"==typeof arguments[1])for(var t in arguments)0!==t&&(e[t-1]=parseFloat(arguments[t]));else for(var t=0;t<arguments[1].length+1;t++)e[t]=parseFloat(arguments[1].shift());switch(r){case"cone":case"con":var a=e[0],o=e[1];return round(1/3*Math.PI*Math.pow(a,2)*o,defPrec);case"cube":case"cub":var n=e[0];return round(Math.pow(n,3),defPrec);case"cylinder":case"cyl":var a=e[0],o=e[1];return round(Math.PI*Math.pow(a,2)*o,defPrec);case"ellipsoid":case"ell":var s=e[0],u=e[1],c=e[2];return round(4/3*Math.PI*s*u*c,defPrec);case"irregularprism":case"irr":var h=e[0],o=e[1];return round(h*o,defPrec);case"pyramid":case"pyr":var f=e[0],l=e[1],o=e[2];return round(f*l*o/3,defPrec);case"rectangularprism":case"rec":var f=e[0],l=e[1],o=e[2];return round(f*l*o,defPrec);case"sphere":case"sph":var a=e[0];return round(4/3*Math.PI*Math.pow(a,3),defPrec);default:showError("You must choose a shape in order to calculate its volume. You may enter the full name of the shape or the first three letters.")}}catch(M){showError(errorMsg+M)}};
